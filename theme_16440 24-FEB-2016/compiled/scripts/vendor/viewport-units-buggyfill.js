/*! 
 * viewport-units-buggyfill v0.3.1
 * @web: https://github.com/rodneyrehm/viewport-units-buggyfill/
 * @author: Rodney Rehm - http://rodneyrehm.de/en/
 */

!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.viewportUnitsBuggyfill=n()}(this,function(){function e(e){m||!e&&!g||(m=!0,v=document.createElement("style"),v.id="patched-viewport",document.head.appendChild(v),c(function(){window.addEventListener("orientationchange",t,!0),t()}))}function n(){v.textContent=r()}function t(){m&&(i(),n())}function i(){return p=[],x.call(document.styleSheets,function(e){"patched-viewport"!==e.ownerNode.id&&e.cssRules&&(!e.media.mediaText||window.matchMedia(e.media.mediaText).matches)&&x.call(e.cssRules,o)}),p}function o(e){if(7===e.type){var n=e.cssText;return w.lastIndex=0,w.test(n)&&p.push([e,null,n]),void 0}if(!e.style){if(!e.cssRules)return;return x.call(e.cssRules,function(e){o(e)}),void 0}x.call(e.style,function(n){var t=e.style.getPropertyValue(n);w.lastIndex=0,w.test(t)&&p.push([e,n,t])})}function r(){h=a();var e,n,t=[],i=[];return p.forEach(function(o){var r=u.apply(null,o),s=r.selector.length?r.selector.join(" {\n")+" {\n":"",a=new Array(r.selector.length+1).join("\n}");return s&&s===e?(s&&!e&&(e=s,n=a),i.push(r.content),void 0):(i.length&&(t.push(e+i.join("\n")+n),i.length=0),s?(e=s,n=a,i.push(r.content)):(t.push(r.content),e=null,n=null),void 0)}),i.length&&t.push(e+i.join("\n")+n),t.join("\n\n")}function u(e,n,t){var i=t.replace(w,s),o=[];n&&(o.push(e.selectorText),i=n+": "+i+";");for(var r=e.parentRule;r;)o.unshift("@media "+y.call(r.media,", ")),r=r.parentRule;return{selector:o,content:i}}function s(e,n,t){var i=h[t],o=parseFloat(n)/100;return o*i+"px"}function a(){var e=window.innerHeight,n=window.innerWidth;return{vh:e,vw:n,vmax:Math.max(n,e),vmin:Math.min(n,e)}}function c(e){var n=0,t=function(){n--,n||e()};x.call(document.styleSheets,function(e){e.href&&l(e.href)!==l(location.href)&&(n++,d(e.ownerNode,t))}),n||e()}function l(e){return e.slice(0,e.indexOf("/",e.indexOf("://")+3))}function d(e,n){f(e.href,function(){var t=document.createElement("style");t.media=e.media,t.textContent=this.responseText,e.parentNode.replaceChild(t,e),n()},n)}function f(e,n,t){var i=new XMLHttpRequest;if("withCredentials"in i)i.open("GET",e,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");i=new XDomainRequest,i.open("GET",e)}return i.onload=n,i.onerror=t,i.send(),i}var h,p,v,m=!1,w=/([0-9.-]+)(vh|vw|vmin|vmax)/g,x=[].forEach,y=[].join,g=/(iPhone|iPod|iPad).+AppleWebKit/i.test(window.navigator.userAgent);return{version:"0.3.1",findProperties:i,getCss:r,init:e,refresh:t}});