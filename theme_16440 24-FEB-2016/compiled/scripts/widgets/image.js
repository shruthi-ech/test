define(["modules/jquery-mozu","underscore","modules/api","modules/backbone-mozu","shim!vendor/jquery-colorbox/jquery.colorbox[jquery=jQuery]>jQuery"],function(e){e("[data-mz-cms-image]").each(function(o,i){i=e(i);var n=i.data("mzCmsImage"),a="#";n&&"lightbox"===n.imageClickAction&&(a="file"===n.imageSource?"/cms/files/"+n.imageFileId:n.imageExternalUrl,i.on("click",function(o){o.preventDefault(),require.mozuData("pagecontext").isEditMode||e.colorbox({photo:!0,href:a,maxHeight:e(window).height()-200,maxWidth:e(window).width()-200,scrolling:!1,opacity:"0.7",scalePhotos:!0,transition:"none",onComplete:function(){e("#cboxClose").html('<span style="display: inline-block">X</span>')}})}))})});